

// //gerenciar as content, dependendo do que o background pedir


// class Content {
//     currentPlayerId
//     player = {
//         adr: 0,
//         tempoDeConta: 0,
//         kdr: 0,
//     }

//     checarTipoDePagina() { }

//     adicionarBotao() { }
//     pegarInformacoesDaLobby(playerIds) { }
//     pegarInformacoesDosJogadoresPagPrincipal(playerId) { }
//     pegarInformacoesDoJogadorMesSeguinte(playerId) { }
//     apresentarInformacoesDaLobby() { }

//     main() {
//         const tipo = this.checarTipoDePagina()
//         console.log("página do tipo : ", tipo)

//         switch (tipo) {
//             case "GC-lobby":
//                 console.log("Tipo de página GC-lobby.")
//                 this.adicionarBotao()
//                 break;
//             case "GC-player":
//                 console.log("Tipo de página GC-player.")
//                 this.pegarInformacoesDosJogadoresPagPrincipal()
//                 this.pegarInformacoesDoJogadorMesSeguinte()
//                 break;
//             default:
//                 console.log("Tipo de página inválida.")
//                 break;
//         }
//         //tenho que escutar um evento para pegar informacoes
//     }
// }

// new Content()



//--------------

chrome.runtime.onMessage.addListener((request, sender, sendResponse) => {
    console.log("new message", request.action)
    // if (request.action === 'fetchADRValue') {
    //     console.log("configurando fechadrvalue request ");
    //     const jogadorId = request.jogadorId;
    //     const tabId = sender.tab.id;

    //     function checkForElement() {
    //         chrome.scripting.executeScript({
    //             target: { tabId: tabId },
    //             func: () => {
    //                 console.log("executnado script");
    //                 const adrElement = document.querySelector('.StatsBoxPlayerInfoItem__name')?.parentElement?.querySelector('.StatsBoxPlayerInfoItem__value');
    //                 console.log('adrElement', adrElement)
    //                 console.log('document')
    //                 console.log(document)
    //                 console.log('.StatsBoxPlayerInfoItem__name')
    //                 console.log(document.querySelector('.StatsBoxPlayerInfoItem__name'))
    //                 let val = adrElement ? adrElement.textContent : null;
    //                 console.log("valor adr encontrado: ", val)
    //                 return val;
    //             }
    //         }, (results) => {
    //             if (results && results[0] && results[0].result) {
    //                 chrome.runtime.sendMessage({
    //                     action: 'returnADRValue',
    //                     jogadorId: jogadorId,
    //                     adr: results[0].result
    //                 });
    //             } else {
    //                 setTimeout(checkForElement, 3000); // Tenta novamente após 1 segundo
    //             }
    //         });
    //     }

    //     checkForElement();
    // }
});